<html>
<head>
    <script src="https://www.gstatic.com/firebasejs/4.6.2/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/4.6.2/firebase-messaging.js"></script>
    <script src="nagarjune/testing/assets/js/aes.js"></script>
    <script src="nagarjune/testing/assets/js/imi-environments.js"></script>
    <script src="nagarjune/testing/assets/js/IMIClient.js"></script>
    <script src="nagarjune/testing/assets/js/jquery.min.js"></script>
    <script src="nagarjune/testing/assets/js/mqttws31.js"></script>
</head>

<body>
    <script>
        IMI.IMIconnect.startup();
        
        function register(userID) {
            console.log("register", userID);
            var deviceID = new Date().getTime(); //any random no.
            var deviceProfile = new IMI.ICDeviceProfile(deviceID, userID);
            var registerCallback = {
                onSuccess: (data) => {
                    console.log('success', data);
                },
                onFailure: (err) => {
                    console.log("register", userID);
                    console.log('Error:', err);
                },
            };
            IMI.IMIconnect.register(deviceProfile, registerCallback);
        }
        register(1); //registers user with ID 1 and requests for push permission.
    </script>
</body>
</html>
